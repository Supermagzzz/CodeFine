<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="test.js"></script>
</head>
<body>
<div style="margin: -7px">
    <div class="name">Структуры</div>
    <hr>
    <div class="block">
        <p>
            Мы изучили много разных типов данных в <b>C++</b>. Все эти типы достаточно просты. Вы можете хранить строку, число. А что делать, если
            вам необходимо хранить более сложные данные? Например, вы разрабатываете игру и хотите создать в ней персонажа.<br><br>
            Игровой персонаж - сложный объект,
            для описания которого можно использовать комбинацию простых переменных (использовать <b>string</b> для хранения имени, <b>int</b> для
            хранения количества очков и т.д).
        </p>
        <p>
            Если создавать новую переменную для каждой характеристики, то их может стать очень много, и работа с ними будет сложной. Язык <b>C++</b>
            позволяет красиво решить эту проблему. Вы можете создавать структуры - новые типы данных, объединяющие переменные-характеристики.<br>
            Давайте посмотрим как их использовать.
        </p>
        <div class="code_block_b">
            <code>
                <gr>#include &lt;iostream&gt;</gr><br>
                <gr>#include &lt;string&gt;</gr><br>
                <br>
                <bl>using namespace std</bl>;<br>
                <br>
                <re>struct</re> Player<br>
                {<br>
                <t><gr>string</gr> nickname;</t><br>
                <t><bl>int</bl> level;</t><br>
                <t><bl>int</bl> health;</t><br>
                };<br>
                <br>
                <bl>int</bl> main()<br>
                {<br>
                <t><gr>Player</gr> p;</t><br>
                <t>p.nickname = <gr>"Jon123"</gr>;</t><br>
                <t>p.level = <pu>0</pu>;</t><br>
                <t>p.health = <pu>100</pu>;</t><br>
                }<br>
            </code>
        </div>
        <p>
            В этой программе мы создали новый тип данных - <b>Player</b>. Этот тип данных состоит их трех <b>полей</b>.<br>
            <b>Поле</b> - переменная в структуре.<br>
            Создание переменных нового типа ничем не отличается от создания обычных переменных. Чтобы получить доступ к полям структуры нужно
            написать имя переменной, точку и название поля, доступ к которому хотите получить.<br>
        </p>
        <p>
            Давайте посмотрим на применение структур, решив следующую задачу.<br>
            Вам на вход приходит список участников конкурса. В одной строке описан один человек в формате - <b>имя баллы</b>.
            Чем больше баллов набрал человек, тем выше он должен занять место в итоговой таблице результатов. Выведите на экран
            результаты конкурса.
        </p>
        <p>
            Задача выглядит просто - нужно лишь отсортировать массив. Но как сохранить порядок имен? Ведь каждый человек должен остаться
            со своими баллами. Один из способов решения подобной задачи - создать новый тип данных, который будет включать в себя и имя и баллы.
        <div class="code_block_b">
            <code>
                <gr>#include &lt;iostream&gt;</gr><br>
                <gr>#include &lt;string&gt;</gr><br>
                <gr>#include &lt;vector&gt;</gr><br>
                <gr>#include &lt;algorithm&gt;</gr><br>
                <br>
                <bl>using namespace std</bl>;<br>
                <br>
                <re>struct</re> Person<br>
                {<br>
                <t><gr>string</gr> name;</t><br>
                <t><bl>int</bl> score;</t><br>
                };<br>
                <br>
                <bl>bool</bl> cmp(<gr>Person</gr> a, <gr>Person</gr> b)<br>
                {<br>
                <t></t><gr>return</gr> a.score > b.score;<br>
                }<br>
                <br>
                <bl>int</bl> main()<br>
                {<br>
                <t></t><bl>int</bl> n;<br>
                <t></t><gr>cin</gr> <re>>></re> n;<br>
                <t></t><gr>vector</gr>&lt;<gr>Person</gr>&gt; v(n);<br>
                <t></t><bl>for</bl>(<bl>int</bl> i = <pu>0</pu>; i < n; i++)<br>
                <t></t>{<br>
                <t></t><t></t><gr>cin</gr> <re>>></re> v[i].name <re>>></re> v[i].score;<br>
                <t></t>}<br>
                <t></t><gr>sort</gr>(v.begin(), v.end(), cmp);<br>
                <t></t><bl>for</bl>(<bl>int</bl> i = <pu>0</pu>; i < n; i++)<br>
                <t></t>{<br>
                <t></t><t></t><gr>cout</gr> <re><<</re> v[i].name <re><<</re> <gr>" "</gr> <re><<</re> v[i].score; <re><<</re> <gr>endl</gr>;<br>
                <t></t>}<br>
                }<br>
            </code>
        </div>
        </p>
        <p>
            Мы объявляем структуру <b>Person</b> - описывающую одного участника конкурса. Эта структура состоит
            из двух полей. Первое поле типа <b>string</b> - имя участника, второе поле типа <b>int</b> - количество его баллов.<br>
            Мы будем сортировать участников, поэтому необходимо написать компаратор (функция, которая возвращает true, если первый аргумент
            должен находиться в массиве раньше, чем второй). Сортировка без компаратора работает только для простых типов данных. Мы сортируем по набранным баллам, поэтому условие выглядит так - <b>a.score > b.score</b>.<br>
            В функции <b>main()</b> мы создаем массив с элементами типа <b>Person</b> и считываем данные в него. После этого мы сортируем массив используя
            наш компаратор и выводим результат на экран.
        </p>
        <p>
            Внимательно изучите этот код. Это отличный пример использования структур в языке <b>C++</b>.
        </p>
        <div class="h">Конструтор</div><hr>
        <p>
            Вернемся к прошлому примеру.
        </p>
        <div class="code_block_b">
            <code>
                <gr>#include &lt;iostream&gt;</gr><br>
                <gr>#include &lt;string&gt;</gr><br>
                <br>
                <bl>using namespace std</bl>;<br>
                <br>
                <re>struct</re> Player<br>
                {<br>
                <t><gr>string</gr> nickname;</t><br>
                <t><bl>int</bl> level;</t><br>
                <t><bl>int</bl> health;</t><br>
                };<br>
                <br>
                <bl>int</bl> main()<br>
                {<br>
                <t><gr>Player</gr> p;</t><br>
                <t>p.nickname = <gr>"Jon123"</gr>;</t><br>
                <t>p.level = <pu>0</pu>;</t><br>
                <t>p.health = <pu>100</pu>;</t><br>
                }<br>
            </code>
        </div>
        <p>
            Чтобы инициализировать игрока нам пришлось использовать целых четыре строки. Но есть более удобный способ, называемый конструктором.
            В прошлой лекции мы увидели применение конструктора на примере <b>vector</b>. Чтобы использовать конструктор небходимо создать функцию
            внутри описания структуры. Имя этой функции должно совпадать с именем структуры, а возвращаемый тип указывать не нужно. Посмотрим пример.
        </p>
        <div class="code_block_b">
            <code>
                <gr>#include &lt;iostream&gt;</gr><br>
                <gr>#include &lt;string&gt;</gr><br>
                <br>
                <bl>using namespace std</bl>;<br>
                <br>
                <re>struct</re> Player<br>
                {<br>
                <t><gr>string</gr> nickname;</t><br>
                <t><bl>int</bl> level;</t><br>
                <t><bl>int</bl> health;</t><br>
                <t></t>Player(<gr>string</gr> _nickname)<br>
                <t></t>{<br>
                <t></t><t></t>nickname = _nickname;<br>
                <t></t><t></t>level = <pu>0</pu>;<br>
                <t></t><t></t>health = <pu>100</pu>;<br>
                <t></t>}<br>
                };<br>
                <br>
                <bl>int</bl> main()<br>
                {<br>
                <t><gr>Player</gr> p(<gr>"Jon123"</gr>);</t><br>
                }<br>
            </code>
        </div>
        <p>
            По умолчанию мы сделаем уровень игрока равным нулю, а его здоровье равным сотне. Никнейм у всех игроков разный, поэтому дадим возможность
            задавать его с помощью аргумента. Конструктор работает с полями в своей структуре, поэтому обращаться к ним можно по именам этих полей.
            Чтобы не путать название поля и аргумента, перед названием аргумента обычно ставят символ нижнего подчеркивания. Вы можете придумать любое
            другое название. Вызов конструктора происходит также, как и в случае <b>vector</b> из прошлой статьи. Во время объявления переменной
            нужно в скобках передать конструтору аргументы. После выполнения всего кода переменная <b>p</b> будет точно такой же, как и в прошлом
            примере.
        </p>
        <div class="h">Функции в структуре</div><hr>
        <p>
            Структура может содержать не только поля с информацией, но и функции, которые будут с этой информацией работать. Например, давайте
            создадим функцию, которая будет повышать уровень игрока на единицу.
        </p>
        <div class="code_block_b">
            <code>
                <re>struct</re> Player<br>
                {<br>
                <t><gr>string</gr> nickname;</t><br>
                <t><bl>int</bl> level;</t><br>
                <t><bl>int</bl> health;</t><br>
                <t></t>Player(<gr>string</gr> _nickname)<br>
                <t></t>{<br>
                <t></t><t></t>nickname = _nickname;<br>
                <t></t><t></t>level = <pu>0</pu>;<br>
                <t></t><t></t>health = <pu>100</pu>;<br>
                <t></t>}<br>
                <t></t><bl>void</bl> nextLevel()<br>
                <t></t>{<br>
                <t></t><t></t>level++;<br>
                <t></t>}<br>
                };<br>
                <br>
                <bl>int</bl> main()<br>
                {<br>
                <t><gr>Player</gr> p(<gr>"Jon123"</gr>);</t><br>
                <t></t>p.nextLevel();<br>
                <t></t>p.nextLevel();<br>
                <t></t><gr>cout</gr> <re><<</re> p.level;<br>
                <t></t><gr>//Вывод: 2</gr><br>
                }<br>
            </code>
        </div>
        <p>
            Функции созданные внутри структуры отличаются от обычной функции только тем, что имеют доступ к полям этой структуры. Чтобы лучше понять
            устройство таких функций, давайте разберем более сложный пример. Добавим поле <b>power</b> - силу атаки и функцию <b>attack</b>
            - атакующую другого персонажа. Когда персонажа атакуют, значение его здоровья уменьшается на силу атакующего.
        </p>
        <div class="code_block_b">
            <code>
                <re>struct</re> Player<br>
                {<br>
                <t><gr>string</gr> nickname;</t><br>
                <t><bl>int</bl> level;</t><br>
                <t><bl>int</bl> health;</t><br>
                <t><bl>int</bl> attack;</t><br>
                <t></t>Player(<gr>string</gr> _nickname, <bl>int</bl> _attack)<br>
                <t></t>{<br>
                <t></t><t></t>nickname = _nickname;<br>
                <t></t><t></t>level = <pu>0</pu>;<br>
                <t></t><t></t>health = <pu>100</pu>;<br>
                <t></t><t></t>attack = _attack;<br>
                <t></t>}<br>
                <t></t><bl>void</bl> nextLevel()<br>
                <t></t>{<br>
                <t></t><t></t>level++;<br>
                <t></t>}<br>
                <t></t><bl>void</bl> attack(<gr>Person</gr> enemy)<br>
                <t></t>{<br>
                <t></t><t></t>enemy.health -= attack;<br>
                <t></t>}<br>
                };<br>
                <br>
                <bl>int</bl> main()<br>
                {<br>
                <t><gr>Player</gr> a(<gr>"Jon123"</gr>, <pu>3</pu>), b(<gr>"Mike321"</gr>, <pu>7</pu>);</t><br>
                <t></t>a.attack(b);<br>
                <t></t><gr>cout</gr> <re><<</re> b.health;<br>
                <t></t><gr>//Вывод: 97</gr><br>
                }<br>
            </code>
        </div>
        <p>
            Сначала мы добавили новое поле в структуру и изменили конструтор. Теперь вторым параметром он принимает силу атаки персонажа.
            В основном коде мы создали два персонажа. Первый имеет силу равную трем и атакует второго. Значение здоровья второго уменьшается на три
            и становится равным девяносто семи. Еще раз внимательно изучите этот код.
        </p>
        <p>
            <b>Поздравляем! Вы изучили основы языка C++. Теперь вы можете перейти к изучению алгоритмов - основых структурных блоков любой программы.
            В процессе дальнейшего обучения мы будем показывать вам новые возможности и особенности языка, но основную часть вы уже выучили.
            Зная весь этот материал, вам не составит труда в любой момент перейти на другой язык программирования.<br><br>
            Удачи в изучении алгоритмов!</b>
        </p>
        <div class="taskLink" onclick="goToTask()">Перейти к задачам</div>
        <br>
        <div class="test">
            <div class="testTitle">Тест</div>
            <hr>
            <form onsubmit="checkForm(3); return false" name="testForm">
                <div class="test_stm">1. Зачем нужны структуры?</div><br>
                <div class="question" id="question0">
                    <span class="que0" onclick="c(0, 0)"><input type="radio" name="0" value="0"> Для возможности сортировать массивы<br></span>
                    <span class="que0" onclick="c(0, 1)"><input type="radio" name="0" value="0"> Чтобы ускорить работу программы<br></span>
                    <span class="que0" onclick="c(0, 2)"><input type="radio" name="0" value="1"> Для создания новых типов данных<br></span>
                </div>
                <br>
                <div class="test_stm">2. Какое максимальное число структур можно создать в коде?</div><br>
                <div class="question" id="question1">
                    <span class="que1" onclick="c(1, 0)"><input type="radio" name="1" value="0"> 1<br></span>
                    <span class="que1" onclick="c(1, 1)"><input type="radio" name="1" value="0"> 5<br></span>
                    <span class="que1" onclick="c(1, 2)"><input type="radio" name="1" value="1"> Это число не ограничено<br></span>
                </div>
                <br>
                <div class="test_stm">3. Пусть персонаж из последнего примера ударит сам себя. Заменим строку <b>a.attack(b)</b> на <b>b.attack(b)</b>. Что выведет этот код?</div><br>
                <div class="code_block_b">
                    <code>
                        <re>struct</re> Player<br>
                        {<br>
                        <t><gr>string</gr> nickname;</t><br>
                        <t><bl>int</bl> level;</t><br>
                        <t><bl>int</bl> health;</t><br>
                        <t><bl>int</bl> attack;</t><br>
                        <t></t>Player(<gr>string</gr> _nickname, <bl>int</bl> _attack)<br>
                        <t></t>{<br>
                        <t></t><t></t>nickname = _nickname;<br>
                        <t></t><t></t>level = <pu>0</pu>;<br>
                        <t></t><t></t>health = <pu>100</pu>;<br>
                        <t></t><t></t>attack = _attack;<br>
                        <t></t>}<br>
                        <t></t><bl>void</bl> nextLevel()<br>
                        <t></t>{<br>
                        <t></t><t></t>level++;<br>
                        <t></t>}<br>
                        <t></t><bl>void</bl> attack(<gr>Person</gr> enemy)<br>
                        <t></t>{<br>
                        <t></t><t></t>enemy.health -= attack;<br>
                        <t></t>}<br>
                        };<br>
                        <br>
                        <bl>int</bl> main()<br>
                        {<br>
                        <t><gr>Player</gr> a(<gr>"Jon123"</gr>, <pu>3</pu>), b(<gr>"Mike321"</gr>, <pu>7</pu>);</t><br>
                        <t></t>b.attack(b);<br>
                        <t></t><gr>cout</gr> <re><<</re> b.health;<br>
                        }<br>
                    </code>
                </div>
                <div class="question" id="question2">
                    <span class="que2" onclick="c(2, 0)"><input type="radio" name="2" value="0"> 100<br></span>
                    <span class="que2" onclick="c(2, 1)"><input type="radio" name="2" value="0"> 97<br></span>
                    <span class="que2" onclick="c(2, 2)"><input type="radio" name="2" value="1"> 93<br></span>
                    <span class="que2" onclick="c(2, 3)"><input type="radio" name="2" value="0"> 90<br></span>
                </div>
                <br>
                <div style="width: 100%; text-align: center">
                    <div class="testError hide" id="testError">Ответьте на все вопросы<br></div>
                    <div class="testResult hide" id="testResult"></div>
                    <input type="submit" value="Проверить" class="submit">
                </div>
            </form>
        </div>
    </div>
</div>
</body>
</html>